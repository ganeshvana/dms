<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record model="ir.ui.view" id="view_company_form_inherit">
        <field name="name">company.template.form</field>
        <field name="model">res.company</field>
        <field name="inherit_id" ref="base.view_company_form"/>
        <field name="arch" type="xml">
        	<field name="favicon" position="after">
        		<field name="state_code"/>
        		<field name="pan"/>
        </field>
           <field name="favicon" position="after">
                    <field name="area" widget="many2many_tags" options="{'no_create': True, 'no_edit': True}"/>
                    <field name="division_ids"  domain = "[('is_division', '=',True )] " widget="many2many_tags" options="{'no_create': True, 'no_edit': True}"/>
                    <field name="division_brand_ids" widget="many2many_tags" invisible="1"/>
                    <field name="division_subbrand_ids" widget="many2many_tags" invisible="1"/>
                    <field name="distributor_code"/>
                    <field name="brand" widget="many2many_tags" domain="[('id', 'in', division_brand_ids)]" options="{'no_create': True, 'no_edit': True}"/>
                    <field name="sub_brand" domain="[('id', 'in', division_subbrand_ids)]" widget="many2many_tags" options="{'no_create': True, 'no_edit': True}"/>
            </field>
        </field>
    </record>

    <record model="ir.ui.view" id="added_fields_from_products">
        <field name="name">products.template.form</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_form_view"/>
        <field name="arch" type="xml">
           <field name="company_id" position="after">
           	   
               <field name="division_id" domain = "[('is_division', '=',True )]" required="1" options="{'no_create': True, 'no_edit': True}"/>
               <field name="division_brand_ids" widget="many2many_tags" invisible="1" options="{'no_create': True, 'no_edit': True}"/>
               <field name="division_subbrand_ids" widget="many2many_tags" invisible="1" options="{'no_create': True, 'no_edit': True}"/>
               <field name="brand_id" required="1" domain="[('id', 'in', division_brand_ids)]" options="{'no_create': True, 'no_edit': True}"/>
               <field name="subbrand_id" required="1" options="{'no_create': True, 'no_edit': True}"/>
               <field name="no_of_pcs"/> 
            </field>   
            <xpath expr="//form/sheet/notebook/page[@name='general_information']/group/group[@name='group_standard_price']/div[@name='pricing']"
             position="after">
                <label for="mrp" class="mt-1"/>
                    <div name="mrp">
                        <field name="mrp" class="oe_inline" widget='monetary'
                            options="{'currency_field': 'currency_id', 'field_digits': True}"/>
                    </div>
            </xpath>
            <xpath expr="//form/sheet/notebook/page[@name='general_information']" position="after">
            	<field name="type" invisible="1"/>
            	<page name="tax_structure" string="Tax Structure">
            		<field name="tax_structure_ids">
            			<tree editable="top">
            				<field name="from_amount"/>
            				<field name="to_amount"/>
            				<field name="sale_tax_ids" required="1" widget="many2many_tags" domain="[('type_tax_use', '=', 'sale')]" options="{'no_create': True, 'no_edit': True}"/>
            				<field name="purchase_tax_ids" required="1" widget="many2many_tags" domain="[('type_tax_use', '=', 'purchase')]" options="{'no_create': True, 'no_edit': True}"/>
            			</tree>
            		</field>
            	</page>
            </xpath>
        </field>
    </record>

    <record model="ir.ui.view" id="view_contact_form_inherit">
        <field name="name">contact.template.form</field>
        <field name="model">res.partner</field>
        <field name="name">Division</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <field name="industry_id" position="after">
                    <field name="area" attrs="{'invisible': [('is_division' ,'=', True)]}"/>
                   <field name="is_division" invisible="1"/>
                    <field name="division_code"/>
                    <field name="brand_id" widget="many2many_tags" attrs="{'invisible': [('is_division' ,'=', False)]}" options="{'no_create': True, 'no_edit': True}"/>
                    <field name="subbrand_id" widget="many2many_tags" attrs="{'invisible': [('is_division' ,'=', False)]}" options="{'no_create': True, 'no_edit': True}"/>
                    <field name="customer_rank" invisible="1"/>
                    <field name="company_id" invisible="1"/>
                    <field name="discount"/>
          </field>
            <xpath expr="//notebook/page[@name='internal_notes']" position="replace">
                <page name="internal_notes" string="Internal Notes">
                    <field name="comment" options="{'height': 70}" placeholder="Internal note..."/>
                </page>
                 <page string="Distributor" name="distributor" attrs="{'invisible': [('is_division' ,'=', True)]}">
                    <field name="res_line_ids" widget="section_and_note_one2many">
                        <tree editable="bottom">
                            <field name="rp_id" invisible="1"/>
                            <field name="company_ids" widget="many2many_tags" invisible="1"/>
                            <field name="division_ids" widget="many2many_tags" invisible="1"/>                            
                            <field name="distributor_id" domain="[('id', 'in', company_ids)]" options="{'no_create': True, 'no_edit': True}"/> 
                            <field name="division_id" domain="[('id', 'in', division_ids)]" options="{'no_create': True, 'no_edit': True}"/>
                            <field name="division_brand_ids" widget="many2many_tags" invisible="1"/>
                            <field name="division_subbrand_ids" widget="many2many_tags" invisible="1"/>
                            <field name="brand_ids" domain="[('id', 'in', division_brand_ids)]" widget="many2many_tags" options="{'no_create': True, 'no_edit': True}"/>
                            <field name="sub_brand_ids" widget="many2many_tags" options="{'no_create': True, 'no_edit': True}"/>
                            <field name="price_list_id" options="{'no_create': True, 'no_edit': True}"/>
                            <field name="promotion_id" options="{'no_create': True, 'no_edit': True}"/>
                            
                            <field name="company_ids" invisible="1"/>
                        </tree>
                    </field>
                </page>
            </xpath>
        </field>
    </record>
    
    <record model="ir.ui.view" id="view_partner_tree_inherit">
        <field name="name">contact.template.form</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_tree"/>
        <field name="arch" type="xml">
        	<field name="company_id" position="attributes">
        		<attribute name="invisible">True</attribute>        		
        	</field>
        	<field name="company_id" position="after">
        		<field name="company_ids"  widget="many2many_tags" options="{'no_create': True, 'no_edit': True}"/>
        		<field name="brand_id"  widget="many2many_tags" options="{'no_create': True, 'no_edit': True}"/>
                <field name="subbrand_id"  widget="many2many_tags" options="{'no_create': True, 'no_edit': True}"/>		
        	</field>
        </field>
    </record>
    
    
    <record model="ir.ui.view" id="product.product_pricelist_view">
        <field name="name">product.pricelist.form</field>
        <field name="model">product.pricelist</field>
        <field name="arch" type="xml">
        	<sheet>
                <widget name="web_ribbon" title="Archived" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
                <div class="oe_title">
                    <h1><field name="name" placeholder="e.g. USD Retailers"/></h1>
                </div>
                <group>
                  <group name="pricelist_settings">
                      <field name="currency_id" groups="base.group_multi_currency"/>
                      <field name="active" invisible="1"/>
                      <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}"/>
                  </group>
                </group>
                <notebook>
                    <page name="pricelist_rules" string="Price Rules">
                      <field name="item_ids" nolabel="1" context="{'default_base':'list_price'}">
                          <tree string="Pricelist Rules" editable="bottom">
                              <field name="product_tmpl_id" domain="[]" string="Products" required="1"/>
                              <field name="product_id"  string="Variants" groups="product.group_product_variant" domain="[('product_tmpl_id', '=', product_tmpl_id)]" options="{'no_create':1}"/>
                              <field name="min_quantity"/>
                              <field name="fixed_price" string="Price"/>
                              <field name="currency_id" invisible="1"/>
                              <field name="pricelist_id" invisible="1"/>
                              <!-- Pricelist ID is here only for related fields to be correctly computed -->
                              <field name="date_start"/>
                              <field name="date_end"/>
                              <field name="base" invisible="1"/>
                              <field name="applied_on" invisible="1"/>
                              <field name="company_id" invisible="1"/>
                          </tree>
                      </field>
                    </page>
                    <page name="pricelist_config" string="Configuration">
                        <group>
                            <group name="pricelist_availability" string="Availability">
                                <field name="country_group_ids" widget="many2many_tags"/>
                            </group>
                            <group name="pricelist_discounts" groups="product.group_discount_per_so_line" string="Discounts">
                                <field name="discount_policy" widget="radio"/>
                            </group>
                        </group>
                    </page>
                </notebook>
            </sheet>
        	 	
        </field>
    </record>

    <record model="ir.ui.view" id="view_purchase_form_inherit">
        <field name="name">purchase.template.form</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_form"/>
         <field name="arch" type="xml">
            <field name="incoterm_id" position="after">
                <field name="oop_ref_no"/>
                <field name="oop_order_date"/>
                <field name="transport_name"/>
               <field name="destination"/>
               <field name="from_ramraj" invisible="1"/>
            </field> 
            <field name="taxes_id" position="after">
                <field name="discount_amount" optional="hide"/>
                <field name="value_before_discount" optional="hide"/>
            </field> 
             <field name="product_qty" position="before">
               
                <field name="mrp" optional="show"/>
            </field>

        </field>
    </record>

    <record model="ir.ui.view" id="added_fields_in_forms">
        <field name="name">added.template.form</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.view_picking_form"/>
         <field name="arch" type="xml">
            <field name="group_id" position="after">
                    <field name="trans_name" readonly="0"/>
                    <field name="ramraj_ref_no" readonly="1"/>
                    <field name="ramraj_ref_date" readonly="1"/> 
                    <field name="from_ramraj" invisible="1"/>                   
            </field>
            <xpath  expr="//form/sheet/notebook/page[@name='operations']/field[@name='move_ids_without_package']/tree/field[@name='description_picking']"
                    position="after">
                    <field name="transit_qty" optional="hide" readonly="1" attrs="{'column_invisible': [('parent.picking_type_code', '!=', 'incoming')]}"/>
                    <field name="transit_sec_qty" optional="hide" readonly="1" attrs="{'column_invisible': [('parent.picking_type_code', '!=', 'incoming')]}"/>
             </xpath> 
        </field>
    </record>

    
    <record model="ir.ui.view" id="view_sale_form_inherit">
        <field name="name">sale.template.form</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
         <field name="arch" type="xml">
         	<field name="partner_id" position="after">
         		<field name="division_id" domain="[('is_division', '=', True)]" options="{'no_create': True, 'no_edit': True}"/>
         	</field>
         	<field name="partner_id" position="attributes">
         		<attribute name="domain">[('customer_rank','&gt;', 0)]</attribute>
         	</field>
            <field name="source_id" position="after">
                    <field name="oop_ref_no" readonly="1"/>
                    <field name="oop_order_date" readonly="1"/>                    
                    <field name="from_ramraj" invisible="1"/>
            </field>
            <xpath  expr="//field[@name='order_line']/tree/field[@name='tax_id']" position="before">
                    <field name="value_before_discount" optional="hide"/>
                    <field name="discount_amount" optional="hide"/>
                    <field name="unitprice_after_discount" optional="hide"/>
           </xpath> 
           <xpath  expr="//field[@name='order_line']/tree/field[@name='product_uom_qty']"
                    position="before">
                   <field name="mrp" optional="show"/>
           </xpath>
        </field>
    </record>

    <record model="ir.ui.view" id="view_account_form_inherit">
        <field name="name">account.template.form</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
         <field name="arch" type="xml">      
         	 
         	<!-- <field name="partner_id" position="after">
         		<field name="partner_id" widget="res_partner_many2one" nolabel="1" 
         		context="{'res_partner_search_mode': (context.get('default_move_type', 'entry') in ('out_invoice', 'out_refund', 'out_receipt') and 'customer') or (context.get('default_move_type', 'entry') in ('in_invoice', 'in_refund', 'in_receipt') and 'supplier') or False, 'show_address': 1, 'default_is_company': True, 'show_vat': True}" 
         		options="{&quot;always_reload&quot;: True, &quot;no_quick_create&quot;: True}" 
         		attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'out_refund', 'out_receipt'))]}" domain="[('customer_rank','&gt;', 0)]"/>
         		<field name="partner_id" widget="res_partner_many2one" nolabel="1" 
         		context="{'res_partner_search_mode': (context.get('default_move_type', 'entry') in ('out_invoice', 'out_refund', 'out_receipt') and 'customer') or (context.get('default_move_type', 'entry') in ('in_invoice', 'in_refund', 'in_receipt') and 'supplier') or False, 'show_address': 1, 'default_is_company': True, 'show_vat': True}" 
         		options="{&quot;always_reload&quot;: True, &quot;no_quick_create&quot;: True}" 
         		attrs="{'invisible': [('move_type', 'not in', ('in_invoice', 'in_refund', 'in_receipt'))]}" domain="['|', ('supplier_rank','&gt;', 0),('is_division', '=', True)]"/>
         	</field>      -->
            <xpath expr="//form/sheet/notebook/page/field[@name='invoice_line_ids']/tree/field[@name='quantity']" position="before">
                    <field name="mrp" optional="show"/>
             </xpath>            
        </field>
    </record>
    
    <record id="division_action_customer" model="ir.actions.act_window">
        <field name="name">Divisions</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">res.partner</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="context">{'default_is_division': 1}</field>
        <field name="domain">[('is_division', '=', True)]</field>
    </record>
    
    <menuitem id="menu_division" name="Division" action="division_action_customer" parent="sale.menu_sale_config" sequence="6"/>

</odoo>    
    